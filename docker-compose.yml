version: "3.8"

services:
  contacts:
    build: .
    environment:
      DATABASE_URL: postgres://ubuntu:4tRLFRDZ99tKHZEx@postgres:5432/contacts?sslmode=disable
      DATABASE_HOST: 'postgres'
      DATABASE_PORT: '5432'
      DB_MIGRATIONS: "${PWD}/db/migrations"
    ports:
      - "8080:8080"
    depends_on:
      - postgres

  postgres:
    image: postgres:13.4-alpine
    environment:
      POSTGRES_USER: root
      POSTGRES_DB: contacts
      POSTGRES_PASSWORD: 4tRLFRDZ99tKHZEx
